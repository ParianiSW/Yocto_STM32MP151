# ============================================================================
#  Disable Splash Screen (psplash / psplash-st)
#  For Pariani STM32MP1 builds based on ST OpenSTLinux (Scarthgap)
# ----------------------------------------------------------------------------
#  This snippet removes the ST boot logo (psplash-st) and disables
#  any automatic splash feature from the image build.
# ============================================================================

# Remove splash image feature globally
IMAGE_FEATURES:remove = "splash"

# Disable psplash as the virtual splash provider
VIRTUAL-RUNTIME_splash = ""

# Prevent psplash and psplash-st from being recommended or installed
BAD_RECOMMENDATIONS += "psplash psplash-st"

# Also ensure they are not explicitly included in the image
IMAGE_INSTALL:remove = "psplash psplash-st"

# Benign log output generated during parsing (indicates that the splash screen has been disabled)
PARIANI_SPLASH_LOG := "${@bb.plain('[meta-pariani] Splash screen (psplash / psplash-st) disabled via snippet.') or ''}"
